<%- include ('./partials/header.ejs'); -%>
<link rel="stylesheet" href="/stylesheets/dashboard.css" />
</head>
<body>
    <nav class="navbar navbar-expand-lg  sticky-top navbar-dark bg-primary">
        <div class="container-fluid">
            <a class="navbar-brand" href="/">Medium Crawler</a>
            <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarMenus" aria-controls="navbarMenus" aria-expanded="false" aria-label="Toggle navigation">
            <span class="navbar-toggler-icon"></span>
            </button>
            <div class="collapse navbar-collapse" id="navbarMenus">
            <div class="navbar-nav">
                <a class="nav-link active" aria-current="page" href="/dashboard">Dashboard</a>
                <a class="nav-link active" href="/searchHistory">Search History</a>
                <a class="nav-link active" href="/login">Login</a>
                <a class="nav-link active" href="/signup">Signup</a>
            </div>
            </div>
        </div>
    </nav>
    <br>
    <br>
    
    <div class="container">
        <h3>Welcome <%= user.fullname %></h3>
        <button class="btn btn-warning "><a class="logoutBtn"href="/logout">Logout</a></button>
        <h5>Search for Artciles using Tags</h5>
        <form method="POST" id="searchForm">
            <div class="form-group w-50">
                <input type="text" class="form-control searchQuery" placeholder="Enter a Tag" required>
            </div>
            <br>
            <div class="form-group">
                <button type="submit" class="btn btn-primary submitBtn">Submit</button>
            </div>
        </form>
        <br>
        <br>
    </div>
<script src="http://code.jquery.com/jquery-1.6.2.min.js"></script>    
<script type="text/javascript">

    $('#searchForm').submit(function(e){  
        e.preventDefault();
        $.ajax({ 
            url: '/search',
            type: 'POST',
            cache: false, 
            data: { searchField:$('.searchQuery').val() }, 
            success: function(data) {
                    console.log(data);
                    console.log('process sucess');
            },
            error: function() {
                    console.log('process error');
            }
        })
        $('.searchForm').append(" <b>Appended text</b>.")
    });          

</script>
<%- include ('./partials/footer.ejs'); -%>